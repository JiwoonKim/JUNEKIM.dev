{"componentChunkName":"component---src-components-templates-blog-post-js","path":"/CS50/web50/lecture_5/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>Harvard's Web Programming with Python and Javascript lecture 5 정리</p>\n</blockquote>\n<h3>JavaScript</h3>\n<p>programming language designed to run inside a browser that runs on <strong>client-side</strong></p>\n<ul>\n<li>client-side processes reduce load on the server and are often faster</li>\n</ul>\n<h4>Syntax</h4>\n<ul>\n<li><strong>Variables</strong>: <code>const</code>, <code>let</code> (local to scope), <code>var</code> (local to function)</li>\n<li><strong>Literals</strong>: <code>Hello, ${name}</code></li>\n<li>\n<p><strong>Selectors</strong>: </p>\n<ul>\n<li><code>document.querySelector(\" \")</code></li>\n<li><code>document.querySelectorAll(\" \")</code></li>\n<li>can change styles: <code>__.style._property_</code></li>\n<li>\n<p>can change classes: </p>\n<ul>\n<li><code>__.ClassName</code></li>\n<li><code>__ClassList.add</code>, <code>__ClassList.remove</code>, <code>__ClassList.toggle</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Event Listeners</strong>: <code>__.addEventListener(_event_, function() { ... });</code></p>\n<ul>\n<li>listens/waits for the event to occur</li>\n<li>when event occured, the function is called (<strong>call back functions</strong>)</li>\n</ul>\n</li>\n<li>\n<p><strong>Arrow Functions</strong>: <code>() => {}</code></p>\n<ul>\n<li>\n<p>used to define <strong>anonymous functions</strong> (w/o the word <em>function</em>)</p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk3\">x</span><span class=\"mtk1\"> </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">x</span><span class=\"mtk1\"> </span><span class=\"mtk5\">+</span><span class=\"mtk1\"> </span><span class=\"mtk6\">2</span><span class=\"mtk1\">;</span></span></code></pre>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk3\">x</span><span class=\"mtk1\"> </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">alert</span><span class=\"mtk1\">(</span><span class=\"mtk3\">x</span><span class=\"mtk1\">); }</span></span></code></pre>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk1\">() </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">alert</span><span class=\"mtk1\">(</span><span class=\"mtk3\">Hello</span><span class=\"mtk1\">); }</span></span></code></pre>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&quot;h1&quot;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">style</span><span class=\"mtk1\">.</span><span class=\"mtk3\">color</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#39;red&#39;</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<h4>JavaScript Examples</h4>\n<ul>\n<li>\n<p>To Do List</p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">// when form is submitted, </span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#new-task&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">onsubmit</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// create a list item element</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">li</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;li&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// assign the input value into the content of the list item</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">li</span><span class=\"mtk1\">.</span><span class=\"mtk3\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#task&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">value</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// append the list item to list</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#tasks&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">append</span><span class=\"mtk1\">(</span><span class=\"mtk3\">li</span><span class=\"mtk1\">)</span><span class=\"mtk12\">&#39;;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// reset the input value in form to blank</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#task&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">value</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#39;&#39;</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// stop from from submitting</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk5\">false</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n</li>\n<li>\n<p>Timer (increment count by 1s)</p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk7\">setInterval</span><span class=\"mtk1\">(</span><span class=\"mtk3\">count</span><span class=\"mtk1\">, </span><span class=\"mtk6\">1000</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">let</span><span class=\"mtk1\"> </span><span class=\"mtk3\">counter</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">0</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">count</span><span class=\"mtk1\">() {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk3\">counter</span><span class=\"mtk5\">++</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#counter&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">counter</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\">// problem: counter resets everytime the browser reloads</span></span></code></pre>\n</li>\n<li>\n<p>Timer (w/ local storage)</p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\">// if no counter, set as 0</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk5\">!</span><span class=\"mtk6\">localStorage</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getItem</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;counter&#39;</span><span class=\"mtk1\">)) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">localStorage</span><span class=\"mtk1\">.</span><span class=\"mtk7\">setItem</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;counter&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">0</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">// set the counter content as counted before</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#counter&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">localStorage</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getItem</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;counter&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">// when button is clicked,</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;button&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">onclick</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// increment count</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">let</span><span class=\"mtk1\"> </span><span class=\"mtk3\">counter</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">localStorage</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getItem</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;counter&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk3\">coutner</span><span class=\"mtk5\">++</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// update counter content value</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&quot;#counter&#39;).textContent = counter;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// store updated value in local storage</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">localStorage</span><span class=\"mtk1\">.</span><span class=\"mtk7\">setItem</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;counter&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk3\">counter</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n</li>\n</ul>\n<h3>Network Models</h3>\n<ul>\n<li>\n<p><strong>Request-Response model</strong></p>\n<ul>\n<li>basis of HTTP requests and how client-server model works</li>\n<li>useful as long as <strong>data is only being passed when a request is made</strong></li>\n</ul>\n</li>\n<li>\n<p><strong>Ajax</strong></p>\n<ul>\n<li>also <strong>based on request-response model</strong></li>\n<li>can make a request to access server-side resource <strong>while not holding up the app to wait for response</strong></li>\n<li>uses <strong>callback functions</strong> to be invoked when response is ready</li>\n</ul>\n</li>\n<li>\n<p><strong>Web Sockets</strong></p>\n<ul>\n<li><strong>based on event model</strong></li>\n<li><strong>persistent connection</strong></li>\n<li>\n<p>useful for <strong>when data is transferred frequently</strong></p>\n<ul>\n<li>data 양이 많아 매번 request를 일일이 매번 만드는 것이 inefficient하기에 web socket가 더 유용</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3>Ajax (Asynchronous JavaScript and XML)</h3>\n<p>asynchronous way of getting data from server</p>\n<ul>\n<li>used to <strong>get more information from server w/o reloading</strong> an entirely new page</li>\n<li>used on the client-side to create asynchronous web apps</li>\n<li><em>굳이 client-side, server-side 따지지 말기</em> (<strong>ajax is its own concept</strong>; bridge btw server &#x26; client)</li>\n</ul>\n<h4>Making an Ajax Call</h4>\n<ol>\n<li>make a <strong>request</strong>: <code>const request = new XMLHttpRequest()</code></li>\n<li>set the <strong>method</strong> &#x26; <strong>route</strong>: <code>request.open('GET', '/')</code> or <code>request.open('POST', '/')</code></li>\n<li>\n<p>define the <strong>callback function</strong>: <code>request.onload = () => { ... }</code></p>\n<ul>\n<li>use w/ <code>const data = JSON.parse(request.responseText)</code> to <em>parse response data</em></li>\n<li>check <strong>data success</strong> and fail cases</li>\n</ul>\n</li>\n<li>\n<p><strong>send request</strong>: <code>request.send()</code> or <code>request.send(data)</code></p>\n<ul>\n<li>\n<p>if post request, use w/ <code>const data = new FormData()</code> and <em>append object to it</em></p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#form&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">onsubmit</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// create a request</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">request</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">XMLHttpRequest</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">currency</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#currency&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">value</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// set the method and route of the request</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">request</span><span class=\"mtk1\">.</span><span class=\"mtk7\">open</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;POST&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&#39;/convert&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// callback function when request is completed</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">request</span><span class=\"mtk1\">.</span><span class=\"mtk7\">onload</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">data</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">JSON</span><span class=\"mtk1\">.</span><span class=\"mtk7\">parse</span><span class=\"mtk1\">(</span><span class=\"mtk6\">request</span><span class=\"mtk1\">.</span><span class=\"mtk3\">responseText</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk4\">// if successfully received resonse, show content currency</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk9\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk6\">data</span><span class=\"mtk1\">.</span><span class=\"mtk3\">success</span><span class=\"mtk1\">) {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">content</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#96;1 usd = $ {data.rate} $ {currency}&#96;</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#results&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk3\">content</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk4\">// else print error</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk9\">else</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#results&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk3\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#39;error&#39;</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            }</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        };</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// create an object to hold the user input in</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">data</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">FormData</span><span class=\"mtk1\">();</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">data</span><span class=\"mtk1\">.</span><span class=\"mtk7\">append</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;currency&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk3\">currency</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\"></span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// send data</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">request</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk3\">data</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk5\">false</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    };</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n</li>\n</ul>\n</li>\n</ol>\n<h3>Web Sockets</h3>\n<p>protocol that allows <strong>full duplex communication</strong></p>\n<ul>\n<li>allows to open and persist a connection to server so data is transferred quickly</li>\n<li>enables <strong>real-time communication</strong></li>\n<li><strong>both client &#x26; server can send messages</strong></li>\n</ul>\n<h4>Using Web Sockets</h4>\n<ul>\n<li>add a specific reference script to the html</li>\n<li>\n<p>use socket in custom script (js)</p>\n<ul>\n<li><code>var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port)</code></li>\n<li><code>socket.on('connect', () => { ... }</code></li>\n<li><code>socket.emit('submit vote', {'selection': selection})</code></li>\n<li>\n<p><code>socket.on('announce vote', data => { ... }</code></p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"js\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">// create a socket connection</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk9\">var</span><span class=\"mtk1\"> </span><span class=\"mtk3\">socket</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">io</span><span class=\"mtk1\">.</span><span class=\"mtk7\">connect</span><span class=\"mtk1\">(</span><span class=\"mtk6\">location</span><span class=\"mtk1\">.</span><span class=\"mtk3\">protocol</span><span class=\"mtk1\"> </span><span class=\"mtk5\">+</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#39;//&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">+</span><span class=\"mtk1\"> </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk3\">domain</span><span class=\"mtk1\"> </span><span class=\"mtk5\">+</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#39;:&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">+</span><span class=\"mtk1\"> </span><span class=\"mtk6\">location</span><span class=\"mtk1\">.</span><span class=\"mtk3\">port</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk7\">on</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;connect&#39;</span><span class=\"mtk1\">, () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk4\">// if button is clicked, emit a message to server</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;button&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk3\">button</span><span class=\"mtk1\"> </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            </span><span class=\"mtk6\">button</span><span class=\"mtk1\">.</span><span class=\"mtk7\">onclick</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">selection</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">button</span><span class=\"mtk1\">.</span><span class=\"mtk3\">dataset</span><span class=\"mtk1\">.</span><span class=\"mtk3\">vote</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">                </span><span class=\"mtk6\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk7\">emit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;submit vote&#39;</span><span class=\"mtk1\">, {</span><span class=\"mtk12\">&#39;selection&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk3\">selection</span><span class=\"mtk1\">});</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">            };</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        });</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    });</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk4\">// when a message is received from server, display vote</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk6\">socket</span><span class=\"mtk1\">.</span><span class=\"mtk7\">on</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;announce vote&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk3\">data</span><span class=\"mtk1\"> </span><span class=\"mtk9\">=&gt;</span><span class=\"mtk1\"> {</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk9\">const</span><span class=\"mtk1\"> </span><span class=\"mtk3\">li</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;li&#39;</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">li</span><span class=\"mtk1\">.</span><span class=\"mtk3\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk12\">&#96;vote recorded: </span><span class=\"mtk8\">${</span><span class=\"mtk6\">data</span><span class=\"mtk1\">.</span><span class=\"mtk3\">selection</span><span class=\"mtk8\">}</span><span class=\"mtk12\">&#96;</span><span class=\"mtk1\">;</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">        </span><span class=\"mtk6\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&#39;#votes&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">append</span><span class=\"mtk1\">(</span><span class=\"mtk3\">li</span><span class=\"mtk1\">);</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    })</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">});</span></span></code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>enable sockets in server</p>\n<pre class=\"andromeda vscode-highlight\" data-language=\"python\"><code class=\"vscode-highlight-code\"><span class=\"vscode-highlight-line\"><span class=\"mtk4\"># Enable sockets in Flask server</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> os</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">import</span><span class=\"mtk1\"> requests</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">from</span><span class=\"mtk1\"> flask </span><span class=\"mtk9\">import</span><span class=\"mtk1\"> Flask, jsonify, render_template, </span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">from</span><span class=\"mtk1\"> flask_socketio </span><span class=\"mtk9\">import</span><span class=\"mtk1\"> SocketIO, emit</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">app </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Flask</span><span class=\"mtk1\">(</span><span class=\"mtk3\">__name__</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\"># create socket</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">socketio </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">SocketIO</span><span class=\"mtk1\">(app)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk4\"># when server receives message, emit message to all (broadcast)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk7\">@socketio.on</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&quot;submit vote&quot;</span><span class=\"mtk1\">)</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk9\">def</span><span class=\"mtk1\"> </span><span class=\"mtk7\">vote</span><span class=\"mtk1\">(</span><span class=\"mtk3\">data</span><span class=\"mtk1\">):</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    selection </span><span class=\"mtk5\">=</span><span class=\"mtk1\"> data[</span><span class=\"mtk12\">&#39;selection&#39;</span><span class=\"mtk1\">]</span></span>\n<span class=\"vscode-highlight-line\"><span class=\"mtk1\">    </span><span class=\"mtk7\">emit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">&quot;announce vote&quot;</span><span class=\"mtk1\">, {</span><span class=\"mtk12\">&quot;selection&quot;</span><span class=\"mtk1\">: selection}, </span><span class=\"mtk3\">broadcast</span><span class=\"mtk5\">=True</span><span class=\"mtk1\">)</span></span></code></pre>\n</li>\n</ul>\n<style class=\"vscode-highlight-styles\">\n  :root {\n  --vscode-highlight-padding-v: 1rem;\n  --vscode-highlight-padding-h: 1.5rem;\n  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);\n  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);\n  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);\n  --vscode-highlight-border-radius: 8px;\n\n  --vscode-highlight-line-highlighted-background-color: transparent;\n  --vscode-highlight-line-highlighted-border-width: 4px;\n  --vscode-highlight-line-highlighted-border-color: transparent;\n}\n\n.vscode-highlight {\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n  padding-top: 1rem;\n  padding-top: var(--vscode-highlight-padding-top);\n  padding-bottom: 1rem;\n  padding-bottom: var(--vscode-highlight-padding-bottom);\n  border-radius: 8px;\n  border-radius: var(--vscode-highlight-border-radius);\n  font-feature-settings: normal;\n}\n\n.vscode-highlight-code {\n  display: inline-block;\n  min-width: 100%;\n}\n\n.vscode-highlight-line {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 100%;\n  padding-left: 1.5rem;\n  padding-left: var(--vscode-highlight-padding-left);\n  padding-right: 1.5rem;\n  padding-right: var(--vscode-highlight-padding-right);\n}\n\n.vscode-highlight-line-highlighted {\n  background-color: var(--vscode-highlight-line-highlighted-background-color);\n  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);\n}\n\n  .andromeda {\nbackground-color: #23262E;\ncolor: #D5CED9;\n}\n\n.andromeda .mtk1 { color: #D5CED9; }\n.andromeda .mtk2 { color: #23262E; }\n.andromeda .mtk3 { color: #00E8C6; }\n.andromeda .mtk4 { color: #5F6167; }\n.andromeda .mtk5 { color: #EE5D43; }\n.andromeda .mtk6 { color: #F39C12; }\n.andromeda .mtk7 { color: #FFE66D; }\n.andromeda .mtk8 { color: #F92672; }\n.andromeda .mtk9 { color: #C74DED; }\n.andromeda .mtk10 { color: #7CB7FF; }\n.andromeda .mtk11 { color: #FF00AA; }\n.andromeda .mtk12 { color: #96E072; }\n.andromeda .mtki { font-style: italic; }\n.andromeda .mtkb { font-weight: bold; }\n.andromeda .mtku { text-decoration: underline; text-underline-position: under; }\n</style>","frontmatter":{"title":"Web50 lecture 5 - JavaScript & Web Sockets","date":"2018-08-21","tags":["CS50","Web50","JavaScript","웹소켓"]}}},"pageContext":{"slug":"/CS50/web50/lecture_5/"}}}